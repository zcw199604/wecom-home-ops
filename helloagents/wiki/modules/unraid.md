# unraid

## ç›®çš„
å°è£… Unraid çš„å®¹å™¨ç®¡ç†èƒ½åŠ›ï¼Œå¯¹å¤–æä¾›ç»Ÿä¸€åŠ¨ä½œæ¥å£ï¼ˆé‡å¯/åœæ­¢/å¼ºåˆ¶æ›´æ–°ï¼‰ã€‚

## æ¨¡å—æ¦‚è¿°
- **èŒè´£:** è¿æ¥ç®¡ç†ï¼ˆå¦‚ SSH/HTTPï¼‰ï¼›æ‰§è¡Œå®¹å™¨æ“ä½œï¼›é”™è¯¯å½’ç±»ä¸å›æ˜¾ä¿¡æ¯æ ¼å¼åŒ–ï¼›ä½œä¸º Provider æ¥å…¥ä¼ä¸šå¾®ä¿¡äº¤äº’
- **çŠ¶æ€:** ğŸš§å¼€å‘ä¸­
- **æœ€åæ›´æ–°:** 2026-01-17

## è§„èŒƒ

### éœ€æ±‚: å®¹å™¨æ“ä½œï¼ˆMVPï¼‰
**æ¨¡å—:** unraid
å¯¹æŒ‡å®šå®¹å™¨æ‰§è¡Œï¼š
- é‡å¯ï¼ˆrestartï¼‰
- åœæ­¢ï¼ˆstopï¼‰
- å¼ºåˆ¶æ›´æ–°ï¼ˆforce updateï¼‰
  - è¯´æ˜ï¼šä¼˜å…ˆä½¿ç”¨ Unraid GraphQL æä¾›ç›¸åº” mutationï¼›ä»£ç ä¼šè‡ªåŠ¨å›é€€å°è¯• `updateContainer(id: PrefixedID!)` ä¸ `update(id: PrefixedID!)`ï¼Œå¦‚ä»ä¸ä¸€è‡´å†é€šè¿‡é…ç½®è¦†ç›–ï¼ˆè§ä¸‹æ–‡ï¼‰
  - å…œåº•ï¼šå½“ç›®æ ‡ Unraid çš„ `DockerMutations` ä¸æä¾›æ›´æ–°ç›¸å…³ mutationï¼ˆGraphQL æ ¡éªŒé”™è¯¯ï¼‰æ—¶ï¼Œå¯å¯ç”¨ WebGUI StartCommand.php å…œåº•æ‰§è¡Œ `update_container <name>`ï¼ˆéœ€é…ç½® csrf_tokenï¼Œå¯èƒ½éœ€è¦ Cookieï¼‰

### éœ€æ±‚: å®¹å™¨æŸ¥çœ‹ï¼ˆçŠ¶æ€/æ—¥å¿—ï¼‰
**æ¨¡å—:** unraid
å¯¹æŒ‡å®šå®¹å™¨æŸ¥çœ‹ï¼š
- çŠ¶æ€ï¼ˆstate/statusï¼‰ä¸è¿è¡Œæ—¶é•¿ï¼ˆä» `status` å­—ç¬¦ä¸²è§£æï¼Œå¦‚ `Up 3 hours`ï¼‰
- æœ€æ–°æ—¥å¿—ï¼ˆé»˜è®¤ 50 è¡Œï¼Œæ”¯æŒæŒ‡å®šè¡Œæ•°ï¼›è¾“å‡ºæœ‰é•¿åº¦æˆªæ–­ï¼‰

### éœ€æ±‚: ç³»ç»Ÿç›‘æ§ï¼ˆç³»ç»Ÿèµ„æºæ¦‚è§ˆ/è¯¦æƒ…ï¼‰
**æ¨¡å—:** unraid
æŸ¥çœ‹ä¸»æœºç³»ç»Ÿèµ„æºï¼ˆå…¥å£ä½äºä¼ä¸šå¾®ä¿¡ Unraid èœå•çš„â€œç³»ç»Ÿç›‘æ§â€ï¼Œä¸åœ¨â€œå®¹å™¨æŸ¥çœ‹â€ä¸­å±•ç¤ºï¼‰ï¼š
- CPUï¼šä½¿ç”¨ `metrics.cpu.percentTotal`ï¼ˆè¯¦æƒ…é¢å¤–å±•ç¤º per-CPU å‰ 8 ä¸ªæ ¸ï¼‰
- å†…å­˜ï¼šæ¦‚è§ˆå±•ç¤ºä½¿ç”¨ `effective used = total - available` çš„å£å¾„ï¼›è¯¦æƒ…åŒæ—¶ä¿ç•™ raw used ä¾¿äºæ’æŸ¥
- ç½‘ç»œï¼šå¯é€‰å±•ç¤ºâ€œå®¹å™¨ç´¯è®¡ç½‘ç»œ IOâ€ï¼ˆæ±‡æ€»æ‰€æœ‰å®¹å™¨ `stats.netIO` çš„ rx/txï¼›è‹¥ç›®æ ‡ schema/config ä¸æ”¯æŒåˆ™è‡ªåŠ¨çœç•¥ï¼‰
- è¾“å‡ºï¼šä¸­æ–‡æ ‡ç­¾ï¼Œä¼˜å…ˆæŠŠå…³é”®æŒ‡æ ‡æ”¾åœ¨å‰é¢ï¼Œä¾¿äºå¾®ä¿¡ç«¯å¿«é€Ÿåˆ¤è¯»
- 5 åˆ†é’Ÿå‡å€¼ï¼šæš‚ä¸å®ç°ï¼ˆå¦‚éœ€è¦éœ€åœ¨å®¢æˆ·ç«¯ä¾§é‡‡æ ·èšåˆï¼‰

#### æ•°æ®æ¥æºä¸å…¼å®¹ç­–ç•¥
- **çŠ¶æ€/è¿è¡Œæ—¶é•¿:**
  - æ•°æ®æ¥æºï¼š`docker { containers { id names state status } }`
  - è¿è¡Œæ—¶é•¿ï¼šä»…åœ¨ `status` ä»¥ `Up` å¼€å¤´æ—¶è§£æå¹¶å›æ˜¾
- **ç³»ç»Ÿèµ„æº:**
  - CPU/å†…å­˜ï¼š`metrics { cpu { ... } memory { ... } }`
  - ç½‘ç»œï¼ˆå®¹å™¨ç´¯è®¡ï¼‰ï¼š`docker { containers { <stats_field> { netIO } } }`ï¼ˆä¾èµ– `unraid.stats_field`ï¼Œä¸”å­—æ®µéœ€è¦æ”¯æŒ `netIO`ï¼‰
- **æ—¥å¿—:**
  - æ•°æ®æ¥æºï¼šUnraid Connect GraphQL çš„å®¹å™¨å­—æ®µï¼ˆé»˜è®¤ `logs`ï¼‰
  - å…¼å®¹ç­–ç•¥ï¼šä¸å†åš introspection æ¢æµ‹ï¼›æ”¹ä¸ºâ€œå›ºå®šå­—æ®µ + é…ç½®è¦†ç›–â€ã€‚å¦‚ä¸Šæ¸¸ Schema ä¸ä¸€è‡´ï¼Œè¯·åœ¨ `config.yaml` é…ç½®ï¼š
    - `unraid.logs_field` / `unraid.logs_tail_arg` / `unraid.logs_payload_field`
    - `unraid.stats_field` / `unraid.stats_fields`
    - `unraid.force_update_mutation` / `unraid.force_update_arg` / `unraid.force_update_arg_type` / `unraid.force_update_return_fields`
    - ï¼ˆå¯é€‰å…œåº•ï¼‰`unraid.webgui_csrf_token` / `unraid.webgui_cookie` / `unraid.webgui_command_url`
  - æç¤ºï¼šå½“ GraphQL è¿”å›å­—æ®µ/å‚æ•°é”™è¯¯æ—¶ï¼Œé”™è¯¯ä¿¡æ¯ä¼šå¸¦ä¸Šå¯é…ç½®é¡¹æç¤ºï¼Œä¾¿äºå¿«é€Ÿå®šä½

#### è¾“å‡ºé™åˆ¶
- æ—¥å¿—é»˜è®¤ `tail=50`ï¼Œå¯è¾“å…¥ `1~200` è¡Œ
- æ¶ˆæ¯é•¿åº¦å—ä¼ä¸šå¾®ä¿¡é™åˆ¶ï¼šèµ„æºè¯¦æƒ…ä¸æ—¥å¿—ä¼šè¿›è¡Œæˆªæ–­å¹¶æç¤ºâ€œå·²æˆªæ–­â€

### éœ€æ±‚: è¿æ¥æ–¹å¼å¯æ›¿æ¢
**æ¨¡å—:** unraid
MVP ä½¿ç”¨ Unraid Connect æ’ä»¶æä¾›çš„ GraphQL APIï¼ˆ`/graphql` + `x-api-key`ï¼‰ï¼Œå¹¶åœ¨å®ç°å±‚æŠ½è±¡â€œå®¢æˆ·ç«¯/æ‰§è¡Œå™¨â€æ¥å£ï¼Œå…è®¸åç»­åœ¨ä¸æ”¹ä¸šåŠ¡çš„æƒ…å†µä¸‹åˆ‡æ¢ï¼š
- å…¶ä»– API å½¢æ€ï¼ˆä¸åŒæ’ä»¶/ç‰ˆæœ¬å·®å¼‚ï¼‰
- CLI æ¨¡å—ï¼ˆå¦‚ `unraid-api` æä¾›å¯ç”¨å‘½ä»¤èƒ½åŠ›ï¼‰
- SSH + Docker CLIï¼ˆä»…ä½œä¸ºå¤‡é€‰ï¼‰

## APIæ¥å£
æœ¬æ¨¡å—ä¸ç›´æ¥å¯¹å¤–æä¾› HTTP APIï¼Œé€šè¿‡å†…éƒ¨æ¥å£ä¾› core è°ƒç”¨ã€‚

## æ•°æ®æ¨¡å‹
æ— ï¼›ä»…ä½¿ç”¨ Config ä¸­çš„è¿æ¥å‚æ•°ã€‚

## ä¾èµ–
- coreï¼ˆæ¥å£çº¦å®šï¼‰

## å‚è€ƒ
- [unraid_official_api](../unraid_official_api.md) - Unraid å®˜æ–¹ APIï¼ˆGraphQLï¼‰è¦ç‚¹æ•´ç†ï¼ˆç‰ˆæœ¬å¯ç”¨æ€§/API key/OIDC/CLI/ç¤ºä¾‹ Queryï¼‰
- [unraid_mobile_ui](../unraid_mobile_ui.md) - Flutter å®¢æˆ·ç«¯é¡¹ç›®ï¼šåŠŸèƒ½æ¸…å•ä¸ GraphQL ä½¿ç”¨æ–¹å¼æ•´ç†ï¼ˆ/graphql + x-api-key + ws/wss subscriptionï¼‰
- [unraid_schema_10.10.10.100](../unraid_schema_10.10.10.100.md) - ç›®æ ‡å®ä¾‹ GraphQL schema æ‘˜è¦ï¼ˆå« DockerMutations/Array/Vm ç­‰å¯ç”¨å­—æ®µæ¸…å•ï¼‰

## å˜æ›´å†å²
- 2026-01-12: åŸºäº GraphQL API å®ç°å®¹å™¨ stop/start/restartï¼Œå¼ºåˆ¶æ›´æ–°èƒ½åŠ›å¯é…ç½®
- 2026-01-14: å¼ºåˆ¶æ›´æ–°å›é€€è¯†åˆ«å¢å¼ºï¼Œå…¼å®¹ GraphQL é”™è¯¯è½¬ä¹‰å·®å¼‚ï¼Œé¿å…æœªè§¦å‘å›é€€
- 2026-01-14: å¼ºåˆ¶æ›´æ–°æ–°å¢ WebGUI StartCommand.php å…œåº•ï¼ˆupdate_containerï¼‰
- 2026-01-17: ç³»ç»Ÿèµ„æºï¼šå†…å­˜å·²ç”¨æŒ‰ total-available å£å¾„å±•ç¤ºï¼Œå¹¶è¡¥å……å®¹å™¨ç´¯è®¡ç½‘ç»œ IOï¼ˆstats.netIO æ±‡æ€»ï¼‰
- 2026-01-17: èœå•ï¼šæ–°å¢â€œç³»ç»Ÿç›‘æ§â€å…¥å£ï¼Œç³»ç»Ÿèµ„æºä»â€œå®¹å™¨æŸ¥çœ‹â€è¿ç§»
- [202601141207_unraid_force_update_compat](../../history/2026-01/202601141207_unraid_force_update_compat/) - å¼ºåˆ¶æ›´æ–°å›é€€å…¼å®¹ï¼ˆé”™è¯¯è½¬ä¹‰å·®å¼‚ï¼‰
- [202601141334_unraid_force_update_webgui_fallback](../../history/2026-01/202601141334_unraid_force_update_webgui_fallback/) - å¼ºåˆ¶æ›´æ–° WebGUI å…œåº•ï¼ˆStartCommand.php update_containerï¼‰
- [202601121216_unraid_container_inspect](../../history/2026-01/202601121216_unraid_container_inspect/) - å®¹å™¨æŸ¥çœ‹ï¼šçŠ¶æ€/è¿è¡Œæ—¶é•¿/èµ„æºä½¿ç”¨/æœ€æ–°æ—¥å¿—ï¼ˆæŒ‰ GraphQL èƒ½åŠ›æ¢æµ‹ï¼‰
- [202601121219_wecom_service_framework](../../history/2026-01/202601121219_wecom_service_framework/) - è¿ç§»ä¸º Provider å¹¶æ¥å…¥æœåŠ¡é€‰æ‹©èœå•ï¼ˆä¿æŒâ€œå®¹å™¨/unraidâ€ç›´è¾¾å…¥å£ï¼‰
- [202601121424_stability_refactor](../../history/2026-01/202601121424_stability_refactor/) - å» introspectionï¼šå›ºå®šå­—æ®µ + é…ç½®è¦†ç›–ï¼ˆlogs/stats/force updateï¼‰
